{"version":3,"sources":["webpack:///./src/components/Map.vue?8d17","webpack:///./src/components/Map.vue?5c4b","webpack:///./src/components/Map.vue?e1f3","webpack:///./src/components/Map.vue","webpack:///./src/components/Map.vue?f395","webpack:///./src/components/Map.vue?9397","webpack:///./src/components/Map.vue?870d"],"names":["___CSS_LOADER_API_IMPORT___","exports","push","module","i","render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","staticStyle","attrs","on","zoomIn","zoomOut","staticRenderFns","TeaserClass","extend","Teaser","projection","projectionExtent","getExtent","size","resolutions","Array","matrixIds","z","Math","pow","stadsPlanLayer","Tile","source","url","matrixSet","format","tileGrid","WMTS","origin","style","wrapX","layer","inActiveVectorStyle","Style","image","Icon","src","anchor","scale","anchorXUnits","IconAnchorUnits","FRACTION","anchorYUnits","activeVectorStyle","vectorLayer","Vector","features","activeVectorLayer","name","props","items","type","default","olMap","flyOut","methods","setFeatures","getSource","clear","addFeatures","map","item","Feature","teaser","geometry","Point","coordinates","split","createFlyOut","flyOutWrapper","document","createElement","innerFlyOut","accolade","propsData","className","$mount","appendChild","$el","Overlay","position","offset","positioning","OverlayPositioning","BOTTOM_CENTER","autoPan","autoPanMargin","autoPanAnimation","duration","element","getView","setZoom","getZoom","watch","Map","layers","controls","target","$refs","view","View","center","zoom","maxZoom","e","getFeatures","pixel","then","f","removeOverlay","get","addFeature","setTimeout","addOverlay","injectStyles","context","style0","__inject__","component","content","locals","add","shadowRoot"],"mappings":"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","file":"odp-search.3.min.js","sourcesContent":["export * from \"-!../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".map-teaser{max-width:300px;background-color:#fff;padding:1rem;filter:drop-shadow(0 0 .2rem rgba(0,0,0,.1)) drop-shadow(0 0 1rem rgba(0,0,0,.2));border-radius:.2rem}.map-teaser .content__first{display:none}.map-teaser .accolade-inverse{bottom:-1rem;transform:rotate(180deg)}.map-container{height:30rem}.map-container,.map-container .content-container{position:relative}.map-container .tools{position:absolute;z-index:2;top:.8rem;right:.8rem}.map-container .tools>button{display:block;width:2.2rem;padding:0;margin:0 0 .4rem;border:0;border-radius:.2rem;background-color:#fff;color:#23333a;font-size:1.2rem;box-shadow:0 8px 12px 0 rgba(0,125,179,.06);cursor:pointer}.map-container .tools>button i{line-height:2.2rem}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"map\",staticClass:\"map-container\",staticStyle:{\"width\":\"100%\",\"height\":\"600px\"},attrs:{\"tabindex\":\"0\"}},[_c('div',{staticClass:\"content-container\"},[_c('div',{staticClass:\"geolocate\"},[_c('div',{staticClass:\"tools\"},[_c('button',{attrs:{\"type\":\"button\",\"aria-label\":\"Zoom in\",\"title\":\"Zoom in\"},on:{\"click\":_vm.zoomIn}},[_c('i',{staticClass:\"icon-plus\",attrs:{\"aria-hidden\":\"true\"}})]),_c('button',{attrs:{\"type\":\"button\",\"aria-label\":\"Zoom uit\",\"title\":\"Zoom uit\"},on:{\"click\":_vm.zoomOut}},[_c('i',{staticClass:\"icon-minus\",attrs:{\"aria-hidden\":\"true\"}})])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropType } from 'vue'\nimport { fromLonLat, get as getProjection } from 'ol/proj'\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\nimport { getTopLeft, getWidth } from 'ol/extent'\nimport WMTS from 'ol/source/WMTS'\nimport BaseLayer from 'ol/layer/Base'\nimport View from 'ol/View'\nimport Map from 'ol/Map'\nimport TileLayer from 'ol/layer/Tile'\nimport { Row } from '@/types/row'\nimport Teaser from '@/components/Teaser.vue'\n\n// importing the OpenLayers stylesheet is required for having\n// good looking buttons!\nimport 'ol/ol.css'\nimport { Feature, Overlay } from 'ol'\nimport VectorLayer from 'ol/layer/Vector'\nimport { Source, Vector } from 'ol/source'\nimport { Geometry, Point } from 'ol/geom'\nimport { Icon, Style } from 'ol/style'\nimport IconAnchorUnits from 'ol/style/IconAnchorUnits'\nimport OverlayPositioning from 'ol/OverlayPositioning'\n\nconst TeaserClass = Vue.extend(Teaser)\n\nconst projection = getProjection('EPSG:3857')\nconst projectionExtent = projection.getExtent()\nconst size = getWidth(projectionExtent) / 256\nconst resolutions = new Array(14)\nconst matrixIds = new Array(14)\nfor (let z = 0; z < 21; ++z) {\n  // generate resolutions and matrixIds arrays for this WMTS\n  resolutions[z] = size / Math.pow(2, z)\n  matrixIds[z] = 'SG-WEB MERCATOR:' + z\n}\nconst stadsPlanLayer = new TileLayer({\n  source: new WMTS({\n    url: 'https://geo.gent.be/geoserver/gwc/service/wmts/',\n    matrixSet: 'SG-WEB MERCATOR',\n    format: 'image/png',\n    projection,\n    tileGrid: new WMTSTileGrid({\n      origin: getTopLeft(projectionExtent),\n      resolutions,\n      matrixIds\n    }),\n    style: 'default',\n    wrapX: true,\n    layer: 'SG-E-Stadsplan:Stadsplan'\n  })\n})\n\nconst inActiveVectorStyle: Style = new Style({\n  image: new Icon({\n    src: 'marker.svg',\n    anchor: [0.5, 0.5],\n    size: [68, 68],\n    scale: 1,\n    anchorXUnits: IconAnchorUnits.FRACTION,\n    anchorYUnits: IconAnchorUnits.FRACTION\n  })\n})\n\nconst activeVectorStyle: Style = new Style({\n  image: new Icon({\n    src: 'marker_active.svg',\n    anchor: [0.5, 0.5],\n    size: [68, 68],\n    scale: 1,\n    anchorXUnits: IconAnchorUnits.FRACTION,\n    anchorYUnits: IconAnchorUnits.FRACTION\n  })\n})\n\nconst vectorLayer: VectorLayer = new VectorLayer({\n  style: inActiveVectorStyle,\n  source: new Vector({\n    features: []\n  })\n})\n\nconst activeVectorLayer: VectorLayer = new VectorLayer({\n  style: activeVectorStyle,\n  source: new Vector({\n    features: []\n  })\n})\n\nexport default Vue.extend({\n  name: 'OdpMap',\n  props: {\n    items: {\n      type: Array as PropType<Row[]>,\n      default: () => []\n    }\n  },\n  data () {\n    return {\n      olMap: null as unknown as Map,\n      flyOut: null as unknown as Overlay\n    }\n  },\n  methods: {\n    setFeatures: function (): void {\n      vectorLayer.getSource().clear()\n      vectorLayer.getSource().addFeatures(this.items.map(\n        item => new Feature<Geometry>({\n          teaser: item,\n          geometry: new Point(item.coordinates?.split(',') as unknown as number[])\n        })\n      ))\n    },\n    createFlyOut: function (teaser: Row): Overlay {\n      const flyOutWrapper = document.createElement('div')\n      const innerFlyOut = document.createElement('div')\n      const accolade = document.createElement('div')\n      const flyOut = new TeaserClass({ propsData: { teaser } })\n\n      accolade.className = 'accolade-inverse bottom-center'\n      innerFlyOut.className = 'map-teaser'\n\n      flyOut.$mount()\n      innerFlyOut.appendChild(flyOut.$el)\n      innerFlyOut.appendChild(accolade)\n      flyOutWrapper.appendChild(innerFlyOut)\n\n      return new Overlay({\n        position: teaser.coordinates?.split(',') as unknown as number[],\n        offset: [0, -45],\n        positioning: OverlayPositioning.BOTTOM_CENTER,\n        autoPan: true,\n        autoPanMargin: 5,\n        autoPanAnimation: {\n          duration: 200\n        },\n        element: flyOutWrapper\n      })\n    },\n    zoomIn: function () {\n      this.olMap.getView().setZoom((this.olMap.getView()?.getZoom() || 15) + 1)\n    },\n    zoomOut: function () {\n      this.olMap.getView().setZoom((this.olMap.getView()?.getZoom() || 15) - 1)\n    }\n  },\n  watch: {\n    items: function (): void {\n      this.setFeatures()\n    }\n  },\n  mounted () {\n    this.olMap = new Map({\n      layers: [\n        stadsPlanLayer,\n        vectorLayer,\n        activeVectorLayer\n      ],\n      controls: [],\n      target: this.$refs.map as HTMLElement,\n      view: new View({\n        center: fromLonLat([3.7236731510340757, 51.05478835923585]),\n        zoom: 13,\n        maxZoom: 21\n      })\n    })\n    this.olMap.on('click', e => {\n      vectorLayer.getFeatures(e.pixel).then(\n        ([f]) => {\n          this.olMap.removeOverlay(this.flyOut)\n          activeVectorLayer.getSource().clear()\n          if (!f || !f.get('teaser')) {\n            return\n          }\n          activeVectorLayer.getSource().addFeature(f)\n          this.flyOut = this.createFlyOut(f.get('teaser'))\n          setTimeout(() => {\n            this.olMap.addOverlay(this.flyOut)\n          })\n        })\n    })\n    this.setFeatures()\n  }\n})\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=e9c76232&\"\nimport script from \"./Map.vue?vue&type=script&lang=ts&\"\nexport * from \"./Map.vue?vue&type=script&lang=ts&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./Map.vue?vue&type=style&index=0&lang=scss&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  ,true\n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to Shadow Root\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesShadow.js\").default\nmodule.exports.__inject__ = function (shadowRoot) {\n  add(\"3ac084be\", content, shadowRoot)\n};"],"sourceRoot":""}